<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Coins
instance_activate_object(obj_barrel)

if global.mp = 0
    coins = 90
else
    coins = 140

repeat(90)
{
    with instance_find(obj_barrel, irandom(instance_number(obj_barrel) - 1))
    {
        coins += 1
    }
}

global.generation = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Room Cap Clean Up
with obj_room_cap_hor
{
    if !place_meeting(x, y, obj_cap_destroy_hor)
    {
        dy = 0
        repeat(2)
        {
            dx = 0
            repeat(6)
            {
                instance_create(x + dx, y + dy, obj_wall)
                dx += 54
            }
            dy += 54
        }
    }
    instance_destroy()
}

with obj_cap_destroy_hor
    instance_destroy()
    
with obj_room_cap_vert
{
    if !place_meeting(x, y, obj_cap_destroy_vert)
    {
        dy = 0
        repeat(6)
        {
            dx = 0
            repeat(2)
            {
                instance_create(x + dx, y + dy, obj_wall)
                dx += 54
            }
            dy += 54
        }
    }
    
    instance_destroy()
}

with obj_cap_destroy_vert
    instance_destroy()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Room Designation
ds_list_shuffle(rooms)

with ds_list_find_value(rooms, 0)
{
    scr_arena_create(x, y, "start")
    if global.mp = 0
    {
        if !instance_exists(obj_player1)
            instance_create(x + 960, y + 540, obj_player1)
        with obj_player1
        {
            x = other.x + 960
            y = other.y + 540
        }
    }
    else
    {
        if !instance_exists(obj_player1)
            instance_create(x + 852, y + 540, obj_player1)
        if !instance_exists(obj_player2)
            instance_create(x + 1068, y + 540, obj_player2)
            
        with obj_player1
        {
            x = other.x + 852
            y = other.y + 540
        }
        
        with obj_player2
        {
            x = other.x + 1068
            y = other.y + 540
        }
    }
}

instance_create(x , y, obj_camera)
    
with ds_list_find_value(rooms, 1)
    scr_arena_create(x, y, "leave")
    
with ds_list_find_value(rooms, 2)
    scr_arena_create(x, y, ds_list_find_value(other.shop, 0))
    
with ds_list_find_value(rooms, 3)
    scr_arena_create(x, y, ds_list_find_value(other.generic, 0))
    
with ds_list_find_value(rooms, 4)
    scr_arena_create(x, y, ds_list_find_value(other.generic, 1))
    
with ds_list_find_value(rooms, 5)
    scr_arena_create(x, y, ds_list_find_value(other.generic, 2))
    
with ds_list_find_value(rooms, 6)
    scr_arena_create(x, y, ds_list_find_value(other.garena, 0))
    
with ds_list_find_value(rooms, 7)
    scr_arena_create(x, y, ds_list_find_value(other.arenas, 0))
    
with ds_list_find_value(rooms, 8)
    scr_arena_create(x, y, ds_list_find_value(other.arenas, 1))

ds_list_destroy(rooms)
ds_list_destroy(arenas)
ds_list_destroy(garena)

alarm[1] = 1
alarm[2] = 5
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Floor Type
global.titleTimer = sec * 4.5
global.generation = 1

if global.level = 1
{
    global.levelVariant = irandom(1)
    if global.levelVariant = 0
        global.levelName = "Windswept Dunes"
    if global.levelVariant = 1
        global.levelName = "Sandstorm Cliffs"
}

if global.level = 2
{
    global.levelVariant = choose(0, 1)
    if global.levelVariant = 0
        global.levelName = "Thistle Gardens"
    if global.levelVariant = 1
        global.levelName = "Leafy Labrynth"
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Floor Data
arenas = ds_list_create()
garena = ds_list_create()

if global.level = 1
{
    if global.levelVariant = 0
    {
        ds_list_add(arenas, "arena1_1")
        ds_list_add(arenas, "arena1_2")
        ds_list_add(arenas, "arena1_3")
        ds_list_add(garena, "arena1_4g")
        ds_list_add(garena, "arena1_4g")
        ds_list_add(garena, "arena1_5g")
    }
    if global.levelVariant = 1
    {
        ds_list_add(arenas, "arena1_4")
        ds_list_add(arenas, "arena1_5")
        ds_list_add(arenas, "arena1_6")
        ds_list_add(garena, "arena1_1g")
        ds_list_add(garena, "arena1_2g")
        ds_list_add(garena, "arena1_3g")
    }
}
if global.level = 2
{
    if global.levelVariant = 0
    {
        ds_list_add(arenas, "arena2_1")
        ds_list_add(arenas, "arena2_2")
        ds_list_add(arenas, "arena2_3")
        ds_list_add(garena, "arena2_4g")
        ds_list_add(garena, "arena2_4g")
        ds_list_add(garena, "arena2_5g")
    }
    if global.levelVariant = 1
    {
        ds_list_add(arenas, "arena2_4")
        ds_list_add(arenas, "arena2_5")
        ds_list_add(arenas, "arena2_6")
        ds_list_add(garena, "arena2_1g")
        ds_list_add(garena, "arena2_2g")
        ds_list_add(garena, "arena2_3g")
    }
}

if global.level = 3
{
    ds_list_add(arenas, "arena3_1")
    ds_list_add(arenas, "arena3_2")
    ds_list_add(arenas, "arena4_1")
    ds_list_add(arenas, "arena4_2")
}

ds_list_shuffle(garena)
ds_list_shuffle(arenas)

if global.level &gt;= 3 ////
    ds_list_add(garena, ds_list_find_value(arenas, 2))

generic = ds_list_create()
ds_list_add(generic, "rm_consume")
ds_list_add(generic, "rm_item")
ds_list_add(generic, "rm_discount")
ds_list_add(generic, "rm_barrels")
ds_list_add(generic, "rm_boxes")
ds_list_add(generic, "rm_statue")
ds_list_shuffle(generic)

shop = ds_list_create()
ds_list_add(shop, "shop1")
ds_list_add(shop, "shop2")
ds_list_add(shop, "shop3")
ds_list_shuffle(shop)
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Loot
ds_list_shuffle(global.weaponLoot)
ds_list_shuffle(global.normalLoot)

global.normalLootI = 0
global.weaponLootI = 0
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Generate
//Empty Halls

blockers = ds_list_create()

with(obj_door_block_hor)
    ds_list_add(other.blockers, id)
    
with(obj_door_block_vert)
    ds_list_add(other.blockers, id)
    
ds_list_shuffle(blockers)

i = 0
repeat(choose(8, 9))
{
    with ds_list_find_value(blockers, i)
    {
        if object_index = obj_door_block_hor
        {
            instance_create(x, y, obj_cap_destroy_hor)
            instance_create(x-324, y, obj_cap_destroy_hor)
            door_block_generate_hor(obj_dirt)
            instance_destroy()
            show_debug_message("hor")
        }
        
        if object_index = obj_door_block_vert
        {
            instance_create(x, y, obj_cap_destroy_vert)
            instance_create(x, y-324, obj_cap_destroy_vert)
            door_block_generate_vert(obj_dirt)
            instance_destroy()
            show_debug_message("vert")
        }
    }
    i++
}

if !is_possible()
{
    show_debug_message("fail1")
    with ds_list_find_value(blockers, i+1)
    {
        if object_index = obj_door_block_hor
        {
            instance_create(x, y, obj_cap_destroy_hor)
            instance_create(x-324, y, obj_cap_destroy_hor)
            door_block_generate_hor(obj_dirt)
            instance_destroy()
        }
        
        if object_index = obj_door_block_vert
        {
            instance_create(x, y, obj_cap_destroy_vert)
            instance_create(x, y-324, obj_cap_destroy_vert)
            door_block_generate_vert(obj_dirt)
            instance_destroy()
        }
    }
    
    if !is_possible()
    {
        show_debug_message("fail2")
        ds_list_destroy(blockers)
        room_restart()
    }
    
}

    //Solid Halls
with (obj_door_block_hor)
{
    door_block_generate_hor(obj_wall)
    instance_destroy()
}
with (obj_door_block_vert)
{
    door_block_generate_vert(obj_wall)
    instance_destroy()
}

///Room Spawners
rooms = ds_list_create()
dy = 0
repeat(3)
{
    dx = 0
    repeat(3)
    {
        with instance_create(dx, dy, obj_room_generation)
            ds_list_add(other.rooms, self)
        dx += 2268  
    }
    dy += 1404
}

alarm[0] = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
